# 智享进销存管理系统 - 用户登录和管理指南

## 🔧 重要修复说明

我们刚刚修复了一个关键的登录token存储问题。如果您之前遇到"未登录"错误，请按照以下步骤操作：

### 1. 清除浏览器缓存（推荐）
- 按 `Ctrl+Shift+R` (Windows) 或 `Cmd+Shift+R` (Mac) 强制刷新页面
- 或者在浏览器开发者工具中清除localStorage

### 2. 重新登录
- 访问登录页面：`http://localhost:3000/login`
- 使用管理员账号登录：
  - 邮箱：`admin@example.com`
  - 密码：`admin123`

### 3. 验证修复
登录成功后，您应该能够：
- 正常访问用户管理页面
- 创建新用户
- 编辑用户信息
- 重置用户密码
- 删除用户

## 📋 用户管理功能使用指南

### 创建新用户
1. 登录管理员账号
2. 进入"用户管理"页面
3. 点击"新增用户"按钮
4. 填写用户信息：
   - 姓名（必填）
   - 邮箱（必填，不能重复）
   - 手机号（可选）
   - 密码（必填，至少6位）
   - 角色（必选）
5. 点击"创建"按钮

### 编辑用户信息
1. 在用户列表中找到要编辑的用户
2. 点击"编辑"按钮
3. 修改用户信息（邮箱不可修改）
4. 点击"更新"按钮

### 重置用户密码
1. 在用户列表中找到要重置密码的用户
2. 点击"重置密码"按钮
3. 确认操作
4. 密码将被重置为：`123456`

### 删除用户
1. 在用户列表中找到要删除的用户
2. 点击"删除"按钮
3. 确认删除操作

## 🔍 故障排除

### 如果仍然遇到"未登录"错误：

1. **检查浏览器控制台**
   - 按 `F12` 打开开发者工具
   - 查看Console标签页中的调试信息
   - 应该能看到以 `🔍` 开头的调试日志

2. **检查localStorage**
   - 在开发者工具的Application标签页中
   - 查看Local Storage
   - 确认有`user`键，且包含token信息

3. **重新登录**
   - 退出登录
   - 清除浏览器缓存
   - 重新登录

4. **检查网络请求**
   - 在开发者工具的Network标签页中
   - 查看API请求是否包含Authorization头

### 常见问题

**Q: 创建用户时提示"邮箱已存在"**
A: 请使用不同的邮箱地址，系统不允许重复邮箱。

**Q: 无法重置超级管理员密码**
A: 出于安全考虑，系统不允许重置超级管理员的密码。

**Q: 普通用户无法访问用户管理页面**
A: 用户管理功能只对管理员开放，普通用户没有权限。

## 📞 技术支持

如果问题仍然存在，请：
1. 检查终端日志中的错误信息
2. 运行测试脚本：`node scripts/test-complete-user-management.js`
3. 查看系统状态文档：`SYSTEM_STATUS.md`

---
**更新时间**: 2025-05-30
**版本**: v1.1 (修复token存储问题) 